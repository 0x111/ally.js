<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Contain Focus To A Sub-Tree Of The DOM</title>
</head>
<body>
  
  <h1>Contain Focus To A Sub-Tree Of The DOM</h1>
  <p>
    a11y.js provides the method <code>a11y/focus/contain</code> to make sure only
    descendants of a given element can befocused (i.e. become the activeElement).
    This behavior is <a href="http://www.w3.org/WAI/PF/aria-practices/#dialog_modal">considered best practice by WAI ARIA by when presenting modal dialogs</a>.
  </p>
  <p>
    Browsers that support the <code>focusout</code> event (Blink, WebKit, Trident) redirect <code>focus</code> upon the focus target leaving the <var>context</var> focus should be contained in.
    Browser that do not support this event (Gecko) will listen for the <code>KeyEvent</code> <kbd>Tab</kbd> and <kbd>Shift Tab</kbd> to achieve the same.
  </p>
  <p class="note">
    Note: It may be possible to break out of the given <var>context</var> by means of script or <code>MouseEvent</code>.
    It is the developer's responsibility to prevent that from happening, should they wish to.
  </p>

  <h2 id="usage">Usage</h2>
  <pre>// load focus/contain
var containFocus = require('a11y/focus/contain');
// acquire context
var context = document.getElementById('element-to-keep-focus-in');

// activate containing the focus to descendants of context
var disengage = containFocus(context);

// activate containing the focus to descendants of context,
// focusing the first tabbable element
var disengage = containFocus(context, true);

// stop containing the focus
disengage();</pre>


  <h2 id="example">Example</h2>
  <p>Press the "contain focus" button below, you will not be able to escape the three middle <code>&lt;input&gt;</code> elements until you press the button "stop containing focus".</p>

  <hr>
  <button type="button" id="activate">loadingâ€¦</button>
  <hr>
  <input type="text" value="tabbable element before the container">
  <div id="container">
    <input type="text" value="first">
    <input type="text" value="middle">
    <input type="text" value="last">
  </div>
  <input type="text" value="tabbable element after the container">


  <script src="../bower_components/requirejs/require.js"></script>
  <script src="main.js"></script>
  <script>
    require(['a11y/focus/contain'], function(containFocus) {
      var context = document.getElementById('container');
      var button = document.getElementById('activate');

      var stopContainingFocus;
      button.addEventListener('click', function() {
        if (stopContainingFocus) {
          stopContainingFocus();
          stopContainingFocus = null;
          button.textContent = 'contain focus';
        } else {
          stopContainingFocus = containFocus(context, true);
          button.textContent = 'stop containing focus';
        }
      }, false);

      button.textContent = 'contain focus';
    });
  </script>
</body>
</html>
