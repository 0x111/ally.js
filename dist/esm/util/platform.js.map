{"version":3,"sources":["../../src/util/platform.js"],"names":["Object","defineProperty","exports","value","objectTypes","function","object","root","window","oldRoot","freeExports","freeModule","module","nodeType","freeGlobal","global","self","maxSafeInteger","Math","pow","reOpera","thisBinding","objectProto","prototype","hasOwnProperty","toString","capitalize","string","String","charAt","toUpperCase","slice","cleanupOS","os","pattern","label","data","test","exec","replace","RegExp","format","split","each","callback","index","length","forOwn","trim","key","call","getClassOf","isHostType","property","type","qualify","reduce","array","accumulator","parse","ua","context","isCustomContext","nav","navigator","userAgent","isModuleScope","likeChrome","objectClass","airRuntimeClass","enviroClass","javaClass","java","phantomClass","rhino","environment","alpha","beta","doc","document","opera","operamini","operaClass","arch","description","prerelease","useFeatures","version","isSpecialCasedOS","layout","getLayout","name","getName","product","getProduct","manufacturer","getManufacturer","Apple","iPad","iPhone","iPod","Archos","Amazon","Kindle","Asus","Transformer","Nook","BlackBerry","PlayBook","Google","Nexus","HP","TouchPad","HTC","LG","Microsoft","Xbox","Motorola","Xoom","Nintendo","Wii","Nokia","Lumia","Samsung","Sony","getOS","guesses","result","guess","getVersion","patterns","toStringPlatform","push","unshift","indexOf","parseFloat","lang","System","getProperty","system","require","join","e","process","browser","platform","runtime","flash","Capabilities","phantom","major","minor","patch","documentMode","toFixed","appMinorVersion","external","parseInt","architecture","family","cpuClass","ANDROID","WINDOWS","OSX","IOS","BLINK","GECKO","TRIDENT","EDGE","WEBKIT","majorVersion","floor","is","IE9","IE10","IE11","default"],"mappings":"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","file":"platform.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n    function: true,\n    object: true\n};\n\n/** Used as a reference to the global object. */\nvar root = (objectTypes[typeof window] && window) || this;\n\n/** Backup possible global object. */\nvar oldRoot = root;\n\n/** Detect free variable `exports`. */\nvar freeExports = objectTypes[typeof exports] && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n/** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\nvar freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\nif (\n    freeGlobal &&\n    (freeGlobal.global === freeGlobal ||\n        freeGlobal.window === freeGlobal ||\n        freeGlobal.self === freeGlobal)\n) {\n    root = freeGlobal;\n}\n\n/**\n * Used as the maximum length of an array-like object.\n * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n * for more details.\n */\nvar maxSafeInteger = Math.pow(2, 53) - 1;\n\n/** Regular expression to detect Opera. */\nvar reOpera = /\\bOpera/;\n\n/** Possible global object. */\nvar thisBinding = this;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check for own properties of an object. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to resolve the internal `[[Class]]` of values. */\nvar toString = objectProto.toString;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * Capitalizes a string value.\n *\n * @private\n * @param {string} string The string to capitalize.\n * @returns {string} The capitalized string.\n */\nfunction capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n/**\n * A utility function to clean up the OS name.\n *\n * @private\n * @param {string} os The OS name to clean up.\n * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n * @param {string} [label] A label for the OS.\n */\nfunction cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n        '10.0': '10',\n        '6.4': '10 Technical Preview',\n        '6.3': '8.1',\n        '6.2': '8',\n        '6.1': 'Server 2008 R2 / 7',\n        '6.0': 'Server 2008 / Vista',\n        '5.2': 'Server 2003 / XP 64-bit',\n        '5.1': 'XP',\n        '5.01': '2000 SP1',\n        '5.0': '2000',\n        '4.0': 'NT',\n        '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (\n        pattern &&\n        label &&\n        /^Win/i.test(os) &&\n        !/^Windows Phone /i.test(os) &&\n        (data = data[/[\\d.]+$/.exec(os)])\n    ) {\n        os = `Windows ${data}`;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n        os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(\n        os\n            .replace(/ ce$/i, ' CE')\n            .replace(/\\bhpw/i, 'web')\n            .replace(/\\bMacintosh\\b/, 'Mac OS')\n            .replace(/_PowerPC\\b/i, ' OS')\n            .replace(/\\b(OS X) [^ \\d]+/i, '$1')\n            .replace(/\\bMac (OS X)\\b/, '$1')\n            .replace(/\\/(\\d)/, ' $1')\n            .replace(/_/g, '.')\n            .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '')\n            .replace(/\\bx86\\.64\\b/gi, 'x86_64')\n            .replace(/\\b(Windows Phone) OS\\b/, '$1')\n            .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1')\n            .split(' on ')[0]\n    );\n\n    return os;\n}\n\n/**\n * An iteration utility for arrays and objects.\n *\n * @private\n * @param {Array|Object} object The object to iterate over.\n * @param {Function} callback The function called per iteration.\n */\nfunction each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n        while (++index < length) {\n            callback(object[index], index, object);\n        }\n    } else {\n        forOwn(object, callback);\n    }\n}\n\n/**\n * Trim and conditionally capitalize string values.\n *\n * @private\n * @param {string} string The string to format.\n * @returns {string} The formatted string.\n */\nfunction format(string) {\n    string = trim(string);\n    return /^(?:webOS|i(?:OS|P))/.test(string) ? string : capitalize(string);\n}\n\n/**\n * Iterates over an object's own properties, executing the `callback` for each.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} callback The function executed per own property.\n */\nfunction forOwn(object, callback) {\n    for (var key in object) {\n        if (hasOwnProperty.call(object, key)) {\n            callback(object[key], key, object);\n        }\n    }\n}\n\n/**\n * Gets the internal `[[Class]]` of a value.\n *\n * @private\n * @param {*} value The value.\n * @returns {string} The `[[Class]]`.\n */\nfunction getClassOf(value) {\n    return value == null ? capitalize(value) : toString.call(value).slice(8, -1);\n}\n\n/**\n * Host objects can return type values that are different from their actual\n * data type. The objects we are concerned with usually return non-primitive\n * types of \"object\", \"function\", or \"unknown\".\n *\n * @private\n * @param {*} object The owner of the property.\n * @param {string} property The property to check.\n * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n */\nfunction isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return (\n        !/^(?:boolean|number|string|undefined)$/.test(type) &&\n        (type == 'object' ? !!object[property] : true)\n    );\n}\n\n/**\n * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n *\n * @private\n * @param {string} string The string to qualify.\n * @returns {string} The qualified string.\n */\nfunction qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n}\n\n/**\n * A bare-bones `Array#reduce` like utility function.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function called per iteration.\n * @returns {*} The accumulated result.\n */\nfunction reduce(array, callback) {\n    var accumulator = null;\n    each(array, function(value, index) {\n        accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n}\n\n/**\n * Removes leading and trailing whitespace from a string.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} The trimmed string.\n */\nfunction trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n}\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * Creates a new platform object.\n *\n * @memberOf platform\n * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n *  context object.\n * @returns {Object} A platform object.\n */\nfunction parse(ua) {\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n        context = ua;\n        ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext\n        ? !!nav.likeChrome\n        : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = isCustomContext && context.java ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03b1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03b2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(\n        (operaClass = isCustomContext && opera ? opera['[[Class]]'] : getClassOf(opera))\n    )\n        ? operaClass\n        : (opera = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([\n        { label: 'EdgeHTML', pattern: 'Edge' },\n        'Trident',\n        { label: 'WebKit', pattern: 'AppleWebKit' },\n        'iCab',\n        'Presto',\n        'NetFront',\n        'Tasman',\n        'KHTML',\n        'Gecko'\n    ]);\n\n    /* Detectable browser names (order is important). */\n    var name = getName([\n        'Adobe AIR',\n        'Arora',\n        'Avant Browser',\n        'Breach',\n        'Camino',\n        'Epiphany',\n        'Fennec',\n        'Flock',\n        'Galeon',\n        'GreenBrowser',\n        'iCab',\n        'Iceweasel',\n        'K-Meleon',\n        'Konqueror',\n        'Lunascape',\n        'Maxthon',\n        { label: 'Microsoft Edge', pattern: 'Edge' },\n        'Midori',\n        'Nook Browser',\n        'PaleMoon',\n        'PhantomJS',\n        'Raven',\n        'Rekonq',\n        'RockMelt',\n        'SeaMonkey',\n        { label: 'Silk', pattern: '(?:Cloud9|Silk-Accelerated)' },\n        'Sleipnir',\n        'SlimBrowser',\n        { label: 'SRWare Iron', pattern: 'Iron' },\n        'Sunrise',\n        'Swiftfox',\n        'WebPositive',\n        'Opera Mini',\n        { label: 'Opera Mini', pattern: 'OPiOS' },\n        'Opera',\n        { label: 'Opera', pattern: 'OPR' },\n        'Chrome',\n        { label: 'Chrome Mobile', pattern: '(?:CriOS|CrMo)' },\n        { label: 'Firefox', pattern: '(?:Firefox|Minefield)' },\n        { label: 'Firefox for iOS', pattern: 'FxiOS' },\n        { label: 'IE', pattern: 'IEMobile' },\n        { label: 'IE', pattern: 'MSIE' },\n        'Safari'\n    ]);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([\n        { label: 'BlackBerry', pattern: 'BB10' },\n        'BlackBerry',\n        { label: 'Galaxy S', pattern: 'GT-I9000' },\n        { label: 'Galaxy S2', pattern: 'GT-I9100' },\n        { label: 'Galaxy S3', pattern: 'GT-I9300' },\n        { label: 'Galaxy S4', pattern: 'GT-I9500' },\n        'Google TV',\n        'Lumia',\n        'iPad',\n        'iPod',\n        'iPhone',\n        'Kindle',\n        { label: 'Kindle Fire', pattern: '(?:Cloud9|Silk-Accelerated)' },\n        'Nexus',\n        'Nook',\n        'PlayBook',\n        'PlayStation 3',\n        'PlayStation 4',\n        'PlayStation Vita',\n        'TouchPad',\n        'Transformer',\n        { label: 'Wii U', pattern: 'WiiU' },\n        'Wii',\n        'Xbox One',\n        { label: 'Xbox 360', pattern: 'Xbox' },\n        'Xoom'\n    ]);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n        Apple: { iPad: 1, iPhone: 1, iPod: 1 },\n        Archos: {},\n        Amazon: { Kindle: 1, 'Kindle Fire': 1 },\n        Asus: { Transformer: 1 },\n        'Barnes & Noble': { Nook: 1 },\n        BlackBerry: { PlayBook: 1 },\n        Google: { 'Google TV': 1, Nexus: 1 },\n        HP: { TouchPad: 1 },\n        HTC: {},\n        LG: {},\n        Microsoft: { Xbox: 1, 'Xbox One': 1 },\n        Motorola: { Xoom: 1 },\n        Nintendo: { 'Wii U': 1, Wii: 1 },\n        Nokia: { Lumia: 1 },\n        Samsung: { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n        Sony: { 'PlayStation 4': 1, 'PlayStation 3': 1, 'PlayStation Vita': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS([\n        'Windows Phone',\n        'Android',\n        'CentOS',\n        { label: 'Chrome OS', pattern: 'CrOS' },\n        'Debian',\n        'Fedora',\n        'FreeBSD',\n        'Gentoo',\n        'Haiku',\n        'Kubuntu',\n        'Linux Mint',\n        'OpenBSD',\n        'Red Hat',\n        'SuSE',\n        'Ubuntu',\n        'Xubuntu',\n        'Cygwin',\n        'Symbian OS',\n        'hpwOS',\n        'webOS ',\n        'webOS',\n        'Tablet OS',\n        'Linux',\n        'Mac OS X',\n        'Macintosh',\n        'Mac',\n        'Windows 98;',\n        'Windows '\n    ]);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n        return reduce(guesses, function(result, guess) {\n            return (\n                result ||\n                (RegExp(`\\\\b${guess.pattern || qualify(guess)}\\\\b`, 'i').exec(ua) && (guess.label || guess))\n            );\n        });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n        return reduce(guesses, function(result, value, key) {\n            // Lookup the manufacturer by product or scan the UA for the manufacturer.\n            return (\n                result ||\n                ((value[product] ||\n                    value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\n                    RegExp(`\\\\b${qualify(key)}(?:\\\\b|\\\\w*\\\\d)`, 'i').exec(ua)) &&\n                    key)\n            );\n        });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n        return reduce(guesses, function(result, guess) {\n            return (\n                result ||\n                (RegExp(`\\\\b${guess.pattern || qualify(guess)}\\\\b`, 'i').exec(ua) && (guess.label || guess))\n            );\n        });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n        return reduce(guesses, function(result, guess) {\n            var pattern = guess.pattern || qualify(guess);\n            if (!result && (result = RegExp(`\\\\b${pattern}(?:/[\\\\d.]+|[ \\\\w.]*)`, 'i').exec(ua))) {\n                result = cleanupOS(result, pattern, guess.label || guess);\n            }\n            return result;\n        });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n        return reduce(guesses, function(result, guess) {\n            var pattern = guess.pattern || qualify(guess);\n            if (\n                !result &&\n                (result =\n                    RegExp(`\\\\b${pattern} *\\\\d+[.\\\\w_]*`, 'i').exec(ua) ||\n                    RegExp(`\\\\b${pattern}(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)`, 'i').exec(ua))\n            ) {\n                // Split by forward slash and append product version if needed.\n                if (\n                    (result = String(\n                        guess.label && !RegExp(pattern, 'i').test(guess.label) ? guess.label : result\n                    ).split('/'))[1] &&\n                    !/[\\d.]+/.test(result[0])\n                ) {\n                    result[0] += ` ${result[1]}`;\n                }\n                // Correct character case and cleanup string.\n                guess = guess.label || guess;\n                result = format(\n                    result[0]\n                        .replace(RegExp(pattern, 'i'), guess)\n                        .replace(RegExp(`; *(?:${guess}[_-])?`, 'i'), ' ')\n                        .replace(RegExp(`(${guess})[-_.]?(\\\\w)`, 'i'), '$1 $2')\n                );\n            }\n            return result;\n        });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n        return reduce(patterns, function(result, pattern) {\n            return (\n                result ||\n                (RegExp(`${pattern}(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)`, 'i').exec(\n                    ua\n                ) || 0)[1] ||\n                null\n            );\n        });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n        return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n        product = getProduct([manufacturer]);\n    }\n    // Clean up Google TV.\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\n        product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n        product = `${product ? `${product} ` : ''}Simulator`;\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n        description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n        data = parse(ua.replace(/like iPhone OS/, ''));\n        manufacturer = data.manufacturer;\n        product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n        name || (name = 'Safari');\n        os = `iOS${(data = / OS ([\\d_]+)/i.exec(ua)) ? ` ${data[1].replace(/_/g, '.')}` : ''}`;\n    }\n    // Detect Kubuntu.\n    else if (name == 'Konqueror' && !/buntu/i.test(os)) {\n        os = 'Kubuntu';\n    }\n    // Detect Android browsers.\n    else if (\n        (manufacturer &&\n            manufacturer != 'Google' &&\n            ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) || /\\bVita\\b/.test(product))) ||\n        (/\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua))\n    ) {\n        name = 'Android Browser';\n        os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n    }\n    // Detect Silk desktop/accelerated modes.\n    else if (name == 'Silk') {\n        if (!/\\bMobi/i.test(ua)) {\n            os = 'Android';\n            description.unshift('desktop mode');\n        }\n        if (/Accelerated *= *true/i.test(ua)) {\n            description.unshift('accelerated');\n        }\n    }\n    // Detect PaleMoon identifying as Firefox.\n    else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n        description.push(`identifying as Firefox ${data[1]}`);\n    }\n    // Detect Firefox OS and products running Firefox.\n    else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n        os || (os = 'Firefox OS');\n        product || (product = data[1]);\n    }\n    // Detect false positives for Firefox/Safari.\n    else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n        // Escape the `/` for Firefox 1.\n        if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(`${data}/`) + 8))) {\n            // Clear name of false positives.\n            name = null;\n        }\n        // Reassign a generic name.\n        if (\n            (data = product || manufacturer || os) &&\n            (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))\n        ) {\n            name = `${/[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data)} Browser`;\n        }\n    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n        version = getVersion([\n            '(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\\\d.]+$))',\n            'Version',\n            qualify(name),\n            '(?:Firefox|Minefield|NetFront)'\n        ]);\n    }\n    // Detect stubborn layout engines.\n    if (\n        (data =\n            (layout == 'iCab' && parseFloat(version) > 3 && 'WebKit') ||\n            (/\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto')) ||\n            (/\\b(?:Midori|Nook|Safari)\\b/i.test(ua) &&\n                !/^(?:Trident|EdgeHTML)$/.test(layout) &&\n                'WebKit') ||\n            (!layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident')) ||\n            (layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront'))\n    ) {\n        layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n        name += ' Mobile';\n        os = `Windows Phone ${/\\+$/.test(data) ? data : `${data}.x`}`;\n        description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n        name = 'IE Mobile';\n        os = 'Windows Phone 8.x';\n        description.unshift('desktop mode');\n        version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n    }\n    // Detect IE 11.\n    else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n        if (name) {\n            description.push(`identifying as ${name}${version ? ` ${version}` : ''}`);\n        }\n        name = 'IE';\n        version = data[1];\n    }\n    // Leverage environment features.\n    if (useFeatures) {\n        // Detect server-side environments.\n        // Rhino has a global function while others have a global object.\n        if (isHostType(context, 'global')) {\n            if (java) {\n                data = java.lang.System;\n                arch = data.getProperty('os.arch');\n                os = os || `${data.getProperty('os.name')} ${data.getProperty('os.version')}`;\n            }\n            if (isModuleScope && isHostType(context, 'system') && (data = [context.system])[0]) {\n                os || (os = data[0].os || null);\n                try {\n                    data[1] = context.require('ringo/engine').version;\n                    version = data[1].join('.');\n                    name = 'RingoJS';\n                } catch (e) {\n                    if (data[0].global.system == context.system) {\n                        name = 'Narwhal';\n                    }\n                }\n            } else if (\n                typeof context.process == 'object' &&\n                !context.process.browser &&\n                (data = context.process)\n            ) {\n                name = 'Node.js';\n                arch = data.arch;\n                os = data.platform;\n                if (typeof window === \"undefined\") {\n                    version = /[\\d.]+/.exec(data.version)[0];\n                } else {\n                    version = '12.17.0';\n                }\n            } else if (rhino) {\n                name = 'Rhino';\n            }\n        }\n        // Detect Adobe AIR.\n        else if (getClassOf((data = context.runtime)) == airRuntimeClass) {\n            name = 'Adobe AIR';\n            os = data.flash.system.Capabilities.os;\n        }\n        // Detect PhantomJS.\n        else if (getClassOf((data = context.phantom)) == phantomClass) {\n            name = 'PhantomJS';\n            version = (data = data.version || null) && `${data.major}.${data.minor}.${data.patch}`;\n        }\n        // Detect IE compatibility modes.\n        else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n            // We're in compatibility mode when the Trident version + 4 doesn't\n            // equal the document mode.\n            version = [version, doc.documentMode];\n            if ((data = +data[1] + 4) != version[1]) {\n                description.push(`IE ${version[1]} mode`);\n                layout && (layout[1] = '');\n                version[1] = data;\n            }\n            version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n        }\n        os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (\n        version &&\n        (data =\n            /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\n            /(?:alpha|beta)(?: ?\\d)?/i.exec(`${ua};${useFeatures && nav.appMinorVersion}`) ||\n            (/\\bMinefield\\b/i.test(ua) && 'a'))\n    ) {\n        prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n        version =\n            version.replace(RegExp(`${data}\\\\+?$`), '') +\n            (prerelease == 'beta' ? beta : alpha) +\n            (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || (name == 'Firefox' && /\\b(?:Android|Firefox OS)\\b/.test(os))) {\n        name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n        version = version.replace(/\\.[\\d.]+/, '.x');\n    }\n    // Detect Xbox 360 and Xbox One.\n    else if (/\\bXbox\\b/i.test(product)) {\n        os = null;\n        if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n            description.unshift('mobile mode');\n        }\n    }\n    // Add mobile postfix.\n    else if (\n        (/^(?:Chrome|IE|Opera)$/.test(name) || (name && !product && !/Browser|Mobi/.test(name))) &&\n        (os == 'Windows CE' || /Mobi/i.test(ua))\n    ) {\n        name += ' Mobile';\n    }\n    // Detect IE platform preview.\n    else if (name == 'IE' && useFeatures && context.external === null) {\n        description.unshift('platform preview');\n    }\n        // Detect BlackBerry OS version.\n    // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n    else if (\n        (/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) &&\n        (data = (RegExp(`${product.replace(/ +/g, ' *')}/([.\\\\d]+)`, 'i').exec(ua) || 0)[1] || version)\n    ) {\n        data = [data, /BB10/.test(ua)];\n        os = `${data[1] ? ((product = null), (manufacturer = 'BlackBerry')) : 'Device Software'} ${\n            data[0]\n        }`;\n        version = null;\n    }\n        // Detect Opera identifying/masking itself as another browser.\n    // http://www.opera.com/support/kb/view/843/\n    else if (\n        this != forOwn &&\n        product != 'Wii' &&\n        ((useFeatures && opera) ||\n            (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\n            (name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\n            (name == 'IE' &&\n                ((os && !/^Win/.test(os) && version > 5.5) ||\n                    (/\\bWindows XP\\b/.test(os) && version > 8) ||\n                    (version == 8 && !/\\bTrident\\b/.test(ua))))) &&\n        !reOpera.test((data = parse.call(forOwn, `${ua.replace(reOpera, '')};`))) &&\n        data.name\n    ) {\n        // When \"identifying\", the UA contains both Opera and the other browser's name.\n        data = `ing as ${data.name}${(data = data.version) ? ` ${data}` : ''}`;\n        if (reOpera.test(name)) {\n            if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n                os = null;\n            }\n            data = `identify${data}`;\n        }\n        // When \"masking\", the UA contains only the other browser's name.\n        else {\n            data = `mask${data}`;\n            if (operaClass) {\n                name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n            } else {\n                name = 'Opera';\n            }\n            if (/\\bIE\\b/.test(data)) {\n                os = null;\n            }\n            if (!useFeatures) {\n                version = null;\n            }\n        }\n        layout = ['Presto'];\n        description.push(data);\n    }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n        // Correct build number for numeric comparison.\n        // (e.g. \"532.5\" becomes \"532.05\")\n        data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n        // Nightly builds are postfixed with a \"+\".\n        if (name == 'Safari' && data[1].slice(-1) == '+') {\n            name = 'WebKit Nightly';\n            prerelease = 'alpha';\n            version = data[1].slice(0, -1);\n        }\n        // Clear incorrect browser versions.\n        else if (\n            version == data[1] ||\n            version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])\n        ) {\n            version = null;\n        }\n        // Use the full Chrome version when available.\n        data[1] = (/\\bChrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n        // Detect Blink layout engine.\n        if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n            layout = ['Blink'];\n        }\n        // Detect JavaScriptCore.\n        // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n        if (!useFeatures || (!likeChrome && !data[1])) {\n            layout && (layout[1] = 'like Safari');\n            data =\n                ((data = data[0]),\n                    data < 400\n                        ? 1\n                        : data < 500\n                        ? 2\n                        : data < 526\n                            ? 3\n                            : data < 533\n                                ? 4\n                                : data < 534\n                                    ? '4+'\n                                    : data < 535\n                                        ? 5\n                                        : data < 537\n                                            ? 6\n                                            : data < 538\n                                                ? 7\n                                                : data < 601\n                                                    ? 8\n                                                    : '8');\n        } else {\n            layout && (layout[1] = 'like Chrome');\n            data =\n                data[1] ||\n                ((data = data[0]),\n                    data < 530\n                        ? 1\n                        : data < 532\n                        ? 2\n                        : data < 532.05\n                            ? 3\n                            : data < 533\n                                ? 4\n                                : data < 534.03\n                                    ? 5\n                                    : data < 534.07\n                                        ? 6\n                                        : data < 534.1\n                                            ? 7\n                                            : data < 534.13\n                                                ? 8\n                                                : data < 534.16\n                                                    ? 9\n                                                    : data < 534.24\n                                                        ? 10\n                                                        : data < 534.3\n                                                            ? 11\n                                                            : data < 535.01\n                                                                ? 12\n                                                                : data < 535.02\n                                                                    ? '13+'\n                                                                    : data < 535.07\n                                                                        ? 15\n                                                                        : data < 535.11\n                                                                            ? 16\n                                                                            : data < 535.19\n                                                                                ? 17\n                                                                                : data < 536.05\n                                                                                    ? 18\n                                                                                    : data < 536.1\n                                                                                        ? 19\n                                                                                        : data < 537.01\n                                                                                            ? 20\n                                                                                            : data < 537.11\n                                                                                                ? '21+'\n                                                                                                : data < 537.13\n                                                                                                    ? 23\n                                                                                                    : data < 537.18\n                                                                                                        ? 24\n                                                                                                        : data < 537.24\n                                                                                                            ? 25\n                                                                                                            : data < 537.36\n                                                                                                                ? 26\n                                                                                                                : layout != 'Blink'\n                                                                                                                    ? '27'\n                                                                                                                    : '28');\n        }\n        // Add the postfix of \".x\" or \"+\" for approximate versions.\n        layout &&\n        (layout[1] += ` ${(data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+')}`);\n        // Obscure version for some Safari 1-2 releases.\n        if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n            version = data;\n        }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' && (data = /\\bzbov|zvav$/.exec(os))) {\n        name += ' ';\n        description.unshift('desktop mode');\n        if (data == 'zvav') {\n            name += 'Mini';\n            version = null;\n        } else {\n            name += 'Mobile';\n        }\n        os = os.replace(RegExp(` *${data}$`), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n        description.unshift('desktop mode');\n        name = 'Chrome Mobile';\n        version = null;\n\n        if (/\\bOS X\\b/.test(os)) {\n            manufacturer = 'Apple';\n            os = 'iOS 4.3+';\n        } else {\n            os = null;\n        }\n    }\n    // Strip incorrect OS versions.\n    if (\n        version &&\n        version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\n        ua.indexOf(`/${data}-`) > -1\n    ) {\n        os = trim(os.replace(data, ''));\n    }\n    // Add layout engine.\n    if (\n        layout &&\n        !/\\b(?:Avant|Nook)\\b/.test(name) &&\n        (/Browser|Lunascape|Maxthon/.test(name) ||\n            (name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1])) ||\n            (/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(name) &&\n                layout[1]))\n    ) {\n        // Don't add layout details to description if they are falsey.\n        (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n        description = [`(${description.join('; ')})`];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n        description.push(`on ${manufacturer}`);\n    }\n    // Append product to description.\n    if (product) {\n        description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n        data = / ([\\d.+]+)$/.exec(os);\n        isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n        os = {\n            architecture: 32,\n            family: data && !isSpecialCasedOS ? os.replace(data[0], '') : os,\n            version: data ? data[1] : null,\n            toString() {\n                var version = this.version;\n                return (\n                    this.family +\n                    (version && !isSpecialCasedOS ? ` ${version}` : '') +\n                    (this.architecture == 64 ? ' 64-bit' : '')\n                );\n            }\n        };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n        if (os) {\n            os.architecture = 64;\n            os.family = os.family.replace(RegExp(` *${data}`), '');\n        }\n        if (\n            name &&\n            (/\\bWOW64\\b/i.test(ua) ||\n                (useFeatures &&\n                    /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) &&\n                    !/\\bWin64; x64\\b/i.test(ua)))\n        ) {\n            description.unshift('32-bit');\n        }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (os && /^OS X/.test(os.family) && name == 'Chrome' && parseFloat(version) >= 39) {\n        os.architecture = 64;\n    }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n        /**\n         * The CPU architecture the OS is built for.\n         *\n         * @memberOf platform.os\n         * @type number|null\n         */\n        architecture: null,\n\n        /**\n         * The family of the OS.\n         *\n         * Common values include:\n         * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n         * \"Windows XP\", \"OS X\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\", \"SuSE\",\n         * \"Android\", \"iOS\" and \"Windows Phone\"\n         *\n         * @memberOf platform.os\n         * @type string|null\n         */\n        family: null,\n\n        /**\n         * The version of the OS.\n         *\n         * @memberOf platform.os\n         * @type string|null\n         */\n        version: null,\n\n        /**\n         * Returns the OS string.\n         *\n         * @memberOf platform.os\n         * @returns {string} The OS string.\n         */\n        toString() {\n            return 'null';\n        }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n        description.unshift(version);\n    }\n    if (platform.name) {\n        description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n        description.push(product ? `(${os})` : `on ${os}`);\n    }\n    if (description.length) {\n        platform.description = description.join(' ');\n    }\n    return platform;\n}\n\n/*--------------------------------------------------------------------------*/\n\n// Export platform.\nvar platform = parse();\n\n// operating system\n\n// sugar for https://github.com/bestiejs/platform.js\n// make sure to ALWAYS reference the layout engine,\n// even if it is not necessary for the condition,\n// as this makes grepping for this stuff simpler\n\nvar os = platform.os.family || '';\nvar ANDROID = os === 'Android';\nvar WINDOWS = os.slice(0, 7) === 'Windows';\nvar OSX = os === 'OS X';\nvar IOS = os === 'iOS';\n\n// layout\nvar BLINK = platform.layout === 'Blink';\nvar GECKO = platform.layout === 'Gecko';\nvar TRIDENT = platform.layout === 'Trident';\nvar EDGE = platform.layout === 'EdgeHTML';\nvar WEBKIT = platform.layout === 'WebKit';\n\n// browser version (not layout engine version!)\nvar version = parseFloat(platform.version);\nvar majorVersion = Math.floor(version);\nplatform.majorVersion = majorVersion;\n\nplatform.is = {\n    // operating system\n    ANDROID: ANDROID,\n    WINDOWS: WINDOWS,\n    OSX: OSX,\n    IOS: IOS,\n    // layout\n    BLINK: BLINK, // \"Chrome\", \"Chrome Mobile\", \"Opera\"\n    GECKO: GECKO, // \"Firefox\"\n    TRIDENT: TRIDENT, // \"Internet Explorer\"\n    EDGE: EDGE, // \"Microsoft Edge\"\n    WEBKIT: WEBKIT, // \"Safari\"\n    // INTERNET EXPLORERS\n    IE9: TRIDENT && majorVersion === 9,\n    IE10: TRIDENT && majorVersion === 10,\n    IE11: TRIDENT && majorVersion === 11\n};\n\nexports.default = platform;\nmodule.exports = exports['default'];\n//# sourceMappingURL=platform.js.map\n"]}